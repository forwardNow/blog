# Yeoman

## 1. 介绍

发音：

* `[ˈjəʊmən]` , “油门”

作用：

* 创建 generator （生成器，脚手架），执行 generator 生成预定义的项目

功能：

* 向用户询问信息
* 创建预定义好的项目结构
* 安装项目的依赖包

## 2. 快速开始

### 2.1. 搭建环境

创建 cli 项目：

```shell
mkdir cli
cd cli
npm init -y
```

目录结构：

```text
cli/
  src/
    generators/create-app/index.js    
    index.js                          
  package.json
```

### 2.2. 创建 generator

安装依赖：

```shell
# generator 的基类
npm i yeoman-generator
```

编写 generator：

```javascript
// cli/src/generators/create-app/index.js

const Generator = require('yeoman-generator');

class CreateApp extends Generator {
  // 类的所有方法都会执行
  hello() {
    // this.log 打印日志
    this.log('My first generator!');
  }
}

module.exports = CreateApp;
```

### 2.3. 运行 generator

安装依赖：

```shell
npm i yeoman-environment
```

注册并运行 generator ：

```javascript
// cli/src/index.js

const path = require('path');
const yeoman = require('yeoman-environment');
const env = yeoman.createEnv();

const createAppGenerator = {
  name: 'create-app',
  path: path.resolve(__dirname, './generators/create-app/index.js'),
};

env.register(createAppGenerator.path, createAppGenerator.name, null);

env.run('create-app');
```

执行 index.js：

```shell
node ./cli/src/index.js

#=> My first generator!
```

## 3. 参考

* [官网 - https://yeoman.io/](https://yeoman.io/)