<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2023-11-16 19:05:43
@modify date 2023-11-16 19:05:44
@desc [description]
#endregion-->


# webpack 常用配置

## 1. module.noParse

说明：

* 通常用于外部引入的 JS 库，如 jQuery
* Prevent webpack from parsing any files matching the given regular expression(s).

配置:

```js
module.exports = {
  //...
  module: {
    noParse: /jquery|lodash/,

    noParse: (content) => /jquery|lodash/.test(content),
  },
};
```

使用：

* index.html

    ```html
    <html>
      <head><!-- ... --></head>
      <body>
        <div id="app"></div>
        <script src="lib/jquery.min.js"></script>
      </body>
    </html>
    ```

* main.js

    ```js
    import jQuery from 'jquery';

    jQuery('#app').html('hello world!');
    ```


## 2. 编译成模块

说明：

* 该配置用于开发模块

目录：

```text
my-module/
  src/
    index.ts
  dist/
    index.esm.js
    index.cjs.js
    index.d.ts
    index.d.map.ts
  package.json
  tsconfig.json
```

配置：

* webpack.config.js:

    ```js
    module.exports = {
      experiments: {
        outputModule: true,
      },

      entry: {
        'index.esm': {
          import: './src/index.ts',
          library: {
            type: 'module',
          },
        },
        'index.cjs': {
          import: './src/index.ts',
          library: {
            type: 'commonjs2',
          },
        }
      },

      output: {
        clean: true,
        filename: '[name].js',
        path: path.resolve(__dirname, 'dist'),
      },
    };
    ```

* package.json:

    ```json
    {
      "main": "dist/index.cjs.js",
      "module": "dist/index.esm.js",
      "types": "dist/index.d.ts",
    }
    ```

* tsconfig.json:

    ```json
    {
      "compilerOptions": {
        "outDir": "dist",
        "declaration": true,
        "emitDeclarationOnly": false,
        "declarationMap": true,
      },
    }
    ```