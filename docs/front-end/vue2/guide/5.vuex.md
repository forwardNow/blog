# vuex

## 1. 介绍

在 Vu e中实现集中式状态（数据）管理的一个 Vue 插件，对 vue 应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。

## 2. 与全局事件总线的对比

全局事件总线（多组件共享数据）：

![全局事件总线（多组件共享数据）](./images/shared-data-bus.png)

vuex（多组件共享数据）：

![vuex（多组件共享数据）](./images/shared-data-vuex.png)

## 3. 何时使用？

多个组件需要共享数据时：

* 多个组件需要读取同一个数据
* 多个组件需要修改同一个数据

## 4. 原理图

![https://v3.vuex.vuejs.org/vuex.png](https://v3.vuex.vuejs.org/vuex.png)

## 搭建 vuex 环境

### 安装

```shell
# vue2.x 使用 vuex3
npm i vuex@3
```

### 准备 store 对象

store/index.js:

```javascript
import Vue from 'vue'
import Vuex from 'vuex'

// 创建 Vuex.Store 实例之前，必须先 Vue.use(Vuex)
Vue.use(Vuex); 

// 准备 actions 对象 —— 响应组件中用户的动作
const actions = {}
// 准备 mutations 对象 —— 修改 state 中的数据
const mutations = {}
// 准备 state 对象 —— 保存具体的数据
const state = {}

// 创建 store
const store = new Vuex.Store({
  actions,
  mutations,
  state
});

// 暴露 store
export default store;
```

注意：

* 创建 ```Vuex.Store``` 实例之前，必须先 ```Vue.use(Vuex)```
* webpack 优先执行 ```import xxx``` 语句，也就是说 ```import``` 语句会置顶执行

### 注册

main.js：

```javascript
import Vue from 'vue';
import store from './store';

// Vue.use(vuex) 之后，所有的 vm、vc 都有 $store 属性
// 给当前 vm.options.store 赋值 store 后，
// 当前 vm 及其管理的所有 vc 都能通过 $store 访问到 store 

new Vue({
  // ...
  store,
});
```

## 基本使用

### 读

```javascript

```

### 写