# 微信小程序-视图与逻辑

目标：

* 页面之间的导航跳转
* 下拉刷新
* 上拉加载更多
* 常用生命周期函数

目录：

* 页面导航
* 页面事件
* 生命周期
* WXS 脚本

## 1. 页面导航

实现导航的两种方式：

* 声明式导航：使用 `<navigator>` 组件
* 编程式导航：使用导航 API

### 1.1. 声明式导航

导航到 tabBar 页面：

```html
<!--  
  必须指定 url 和 open-type:

    url: 必须以 “/” 打头

    open-type: 值为 "switchTab"
-->
<navigator
  url="/pages/message/message"
  open-type="switchTab"
>
  导航到 tabBar 页面 - 消息页面
</navigator>
```

导航到非 tabBar 页面：

```html
<!--  
    open-type 默认值为 "navigate"
-->
<navigator
  url="/pages/about/about"
  open-type="navigate"
>
  导航到非 tabBar 页面 - 关于页面
</navigator>
```

后退导航：

```html
<!--  
  delta：
    后退几步，默认值为 1
-->
<navigator
  open-type="navigateBack"
  delta="1"
>
  后退一步
</navigator>
```

参考：

* [miniprogram/dev/component/navigator.html](https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html)

### 1.2. 编程式导航

导航到 tabBar 页面：

```javascript
/*  
  参考：https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html
*/
wx.switchTab({
  url: '/pages/message/message',
})
```

导航到非 tabBar 页面：

```javascript
/*  
  参考：https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html
*/
wx.navigateTo({
  url: '/pages/about/about',
});
```

后退导航：

```javascript
/*  
  参考：https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html
*/
wx.navigateBack({
  delta: 1, // 默认值为 1
});

wx.navigateBack();
```