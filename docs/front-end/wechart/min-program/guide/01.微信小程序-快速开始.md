# 微信小程序-快速开始

* 小程序简介
* 第一个小程序
* 小程序代码的构成
* 小程序的宿主环境
* 协同工作和发布

## 1. 小程序简介

### 1.1. 与普通网页开发的区别

| -    | 网页        | 小程序                                         |
|------|-----------|---------------------------------------------|
| 运行环境 | 浏览器       | 微信                                          |
| API  | DOM、BOM   | 微信 API                                      |
| 开发模式 | 浏览器+代码编辑器 | 1.注册小程序开发账号<br>2.安装小程序开发者工具<br>3.创建和配置小程序项目 |

### 1.2. 体验小程序

官方小程序组件展示：

![官方小程序组件展示](./images/01-wx-test.png)

## 2. 第一个小程序

### 2.1. 注册小程序开发账号

步骤：

1. 进入官网: [https://mp.weixin.qq.com/](https://mp.weixin.qq.com/)
2. 注册“微信小程序”

查看 AppID（小程序ID）： 

* 开发管理 -> 开发设置

参考：

* [小程序账号|被系统冻结问题汇总](https://zhuanlan.zhihu.com/p/613599044)

### 2.2. 微信开发者工具

介绍（主要功能）：

* 创建小程序项目
* 编码
* 调试
* 预览、发布

下载：

* 稳定版 Stable Build
* 地址： [https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

设置：

* 设置 -> 代理
* 代理设置：不使用任何代理

查看效果：

* 在模拟器上查看：点击“编译”按钮
* 在真手机上查看：点击“预览”按钮

模拟器：

* 机型：iPhone 6/7/8 (375 x 667 | Dpr:2)

## 3. 小程序代码的构成

### 3.1. 项目结构

```text
proj/
  pages/                      # 页面
  utils/                      # 工具
  .eslintrc.js
  app.js                      # 入口
  app.json                    # 全局配置
  app.wxss                    # 全局样式
  project.config.json         # 项目配置
  project.private.config.json
  sitemap.json                # 配置小程序及其页面能否被索引    
```

### 3.2. 页面组成

每个页面都是以单独文件夹存在，文件夹内包含四个基本文件

```text
pages/
  index/
    index.js        # 脚本
    index.json      # 配置
    index.wxml      # 结构
    index.wxss      # 样式
```

### 3.3. json 配置文件

小程序中有四种配置文件：

1. `proj/app.json`
2. `proj/project.config.json`
3. `proj/sitemap.json`
4. 页面的 .json 配置文件

#### 3.3.1. app.json

说明：

* 全局配置
* 所有页面的路径、窗口外观、界面变现、底部 tab 等

默认的 4 个配置项：

* pages: 所有页面的路径
* window: 所有页面的背景色、颜色等
* style: 小程序组件的样式版本
* sitemapLocation: sitemap.json 的位置

#### 3.3.2. project.config.json

说明：

* 小程序开发工具的配置

示例：

* setting: 编译相关的配置
* appid
* projectname: 项目名称（不是小程序的名称）

#### 3.3.3. sitemap.json

说明：

* 类似于网页的 SEO
* 配置小程序页面是否允许小程序索引

#### 3.3.4. 页面的 .json 配置文件

说明：

* 页面中的 .json 文件对本页面的窗口进行配置
* 会覆盖 app.json 中 window 属性中同名的配置项

### 3.4. 页面

#### 3.4.1. 新建页面

说明：

* 在 app.json 的 pages 数组新增一个页面路径，即自动生成页面模板

示例：

```json
{
  "pages":[
    "pages/index/index",
    // 新增该路径后，会自动生成 list 页面模板
    "pages/list/list"
  ]
}
```

#### 3.4.2. 修改项目首页

说明：

* app.json 的 pages 数组的第一个元素的路径即为首页

### 3.5. WXML 模板

#### 3.5.1. 什么是 WXML

WXML，WeiXin Markup Language，小程序设计的标签语言，用来构建页面结构

类似 HTML

#### 3.5.2. WXML 和 HTML 的区别

标签名称不同：

* HTML —— div, span, img, a
* WXML —— view, text, image, navigator

属性不同：

* `<a href="...">`
* `<navigator url="...">`

模板语法：

* 数据绑定
* 列表渲染
* 条件渲染

### 3.6. WXSS 样式

#### 3.6.1. 什么是 WXSS

WXSS，WeiXin Style Sheet，小程序设计的样式语言，用来描述页面样式

类似于 CSS

#### 3.6.2. WXSS 与 CSS 的区别

针对不同屏幕尺寸，新增了 rpx 尺寸单位：

* CSS 中需要手动换算单位，如 rem
* WXSS 提供新的尺寸单位 rpx，自动换算

全局样式和局部样式：

* 全局样式 —— app.wxss
* 局部样式 —— 页面中的 .wxss 只作用当前页面

WXSS 支持绝大多数选择器：

* class、id、element、并集、后代、::after、::before
* 等等
