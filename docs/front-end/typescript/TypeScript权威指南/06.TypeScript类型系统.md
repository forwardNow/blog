# TypeScript 类型系统

## 1. 基本概念

基本注解：

* 类型注解使用 TypeAnnotation 语法
* 类型声明空间中内容都可以用作注解
* 示例：

    ```typescript
    const num: number = 10;

    function identity(num: number): number {
      return num;
    }
    ```

基本类型注解：

* `string` / `number` / `boolean`
* 示例：

    ```typescript
    let num: number;
    let str: string;
    let bool: boolean;
    ```

数组注解：

* `类型[]`
* 示例：

    ```typescript
    let boolArr: boolean[];
    ```

接口注解：

* 合并多个类型注解
* 示例：

    ```typescript
    interface Name {
      first: string;
      seconde: string;
    }

    let name: Name;
    ```

内联注解：

* 不用给类型起名字，只用一次
* 示例：

    ```typescript
    let name: {
      first: string;
      seconde: string;
    };
    ```

特殊类型：

* `any`: 关闭类型检查，可赋值给任意类型的变量
* `null` / `undefined`: 可赋值给任意类型的变量
* `void`: 表示函数没有返回值

泛型：

* 示例：

    ```typescript
    function reserve<T>(items: T[]): T[] {
      const toreturn = [];

      for (let i = items.length - 1; i >= 0; i--) {
        toreturn.push(items[i]);
      }

      return toreturn;
    }

    const arr = [1, 2, 3];

    const reserved = reserve(arr);
    ```

联合类型注解：

* 多个类型中挑一个
* 示例：

    ```typescript
    function formatCommandLine(command: string[] | string) {
      // ...
    }
    ```

交叉类型：

* 两个类型的并集
* 示例：

    ```typescript
    // first 继承 second 的属性，同名不覆盖
    function extend<T, U>(first: T, second: U): T & U {
      const result = {} as (T & U);

      for (let key in first) {
        (result as T)[key] = first[key];
      }

      for (let key in second) {
        if (!(result as Object).hasOwnProperty(key)) {
          (result as U)[key] = second[key];
        }
      }

      return result;
    }

    const x = extend({ a: 1, b: 2 }, { b: '2', c: '3' });

    console.log(x); 
    /*
      {
        "a": 1,
        "b": 2,
        "c": "3"
      } 
    */ 
    ```

元组：

* `[类型1, 类型2, ...]`
* 特殊的数组类型，相当于指定参数列表

类型别名：

* 给长类型起别名
* 示例：

    ```typescript
    type Text = string | { text: string };

    type coordinates = [ number, number ];

    type Callback = (date: string) => void;
    ```
