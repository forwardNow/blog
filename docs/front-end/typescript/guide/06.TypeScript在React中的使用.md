# TypeScript 在 React 中的使用

## 1. 使用 CRA 创建支持 TS 的项目

### 1.1. 创建项目

说明：

* React 脚手架工具 `create-react-app`(简称 CRA) 默认支持 TypeScript

示例：

```shell
# "react-ts-basic" 为项目名称
npx create-react-app react-ts-basic --template typescript

# We suggest that you begin by typing:
# 
#   cd react-ts-basic
#   npm start
```

参考：

* [adding-typescript#installation](https://create-react-app.dev/docs/adding-typescript#installation)

### 1.2. 目录结构

与 JS 项目对比，发现：

1. 新增 tsconfig.json 文件
2. 组件的文件扩展名变为 .tsx
3. 新增 react-app-env.d.ts 文件 （React 项目默认的类型声明文件）


### 1.3. react-app-env.d.ts

tsconfig.json 中的 include 配置：

* 指定包含哪些 ts 文件，
* 其中 `.d.ts` 文件会自动加载，无须额外导出和导入

自动导入 `.d.ts` 文件的示例：

```typescript
/* common.d.ts */
type MyCommonType = number;


/* common.d.ts */
let a: MyCommonType = 1;

export default {};
```

同样 `src/react-app-env.d.ts` 文件也会自动加载，其内容为：

```typescript
/// <reference types="react-scripts" />
```

`/// <reference types="react-scripts" />` 为三斜线指令：

* 类似于 import，表示依赖哪个（包的）类型声明文件
* 告诉 TS 加载 react-scripts 这个包提供的类型声明文件

react-scripts 的类型声明文件包含：

1. react、react-dom、node 的类型
2. 图片、样式等模块的类型（允许在 TS 代码中 import 图片、样式等）
