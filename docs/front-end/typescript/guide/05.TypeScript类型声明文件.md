# TypeScript 类型声明文件

## 1. 概述

说明：

* 类型声明文件：用来为已存在的 JS 库提供类型信息
* 在 TS 中使用这些库时，就像 TS 一样，会有代码提示、类型保护等

示例：

```typescript
import axios from "axios";

// node_modules/axios/index.d.ts

axios({
  url: ''
})
```

## 2. TS 中的两种文件类型

分别为：

* **.ts** 文件
* **.d.ts** 文件，类型声明文件

比较：

| 文件    | 内容         | 编译          | 用途          |
|-------|------------|-------------|-------------|
| .ts   | 类型信息、可执行代码 | 编译为 .js 文件  | 编写程序代码      |
| .d.ts | 类型信息       | 不会生成 .js 文件 | 为 JS 提供类型信息 |

总结：

* .ts 是 implementation（代码实现文件）
* .d.ts 是 declaration （类型声明文件） 

## 3. 类型声明文件的使用

在使用 TS 开发项目时，类型声明文件的使用有以下两种方式：

1. 使用已有的类型声明文件
2. 创建自己的类型声明文件

### 3.1. 使用已有的类型声明文件

已有的类型声明文件，有两种情况：

1. 内置类型声明文件
2. 第三方库的类型声明文件

#### 3.1.1. 内置类型声明文件

说明：

* TS 为 JS 运行时可用的所有标准化内置 API 都提供了声明文件
* 比如：
  * lib.es5.d.ts
  * lib.dom.d.ts

#### 3.1.2. 第三方库的类型声明文件

第三方库的类型声明文件有两种存在方式：

1. 库自带类型声明文件
2. 由 DefinitelyTyped 提供

库自带类型声明文件：

* 导入该库时，TS 自动加载库的类型声明文件
* 通过 package.json 中的 `types` 字段指定类型声明文件的位置

DefinitelyTyped：

* 是一个 github 仓库，用来提供高质量的第三方库类型声明文件，[官网](https://github.com/DefinitelyTyped/DefinitelyTyped)
* 安装 xyz 库的类型声明包：`npm i -D @types/xyz`。TS 会自动加载该类型声明包
* 示例
  * 安装：

      ```shell
      npm i lodash
      npm i -D @types/lodash
      ```

  * 使用：

      ```typescript
      import lodash from 'lodash';
      
      let num: number = lodash.add(1, 2);
      ```
