# How TO - Create a Draggable HTML Element

## 示例

```javascript
class DraggableElement {
  /** @type {HTMLElement} */
  target = null;

  /** @type {HTMLElement} */
  handle = null;

  /** @type {HTMLElement} */
  container = null;

  constructor(target, options) {
    this.target = target;
    this.parseOptions(options);
    this.setDraggable();
  }

  parseOptions(options) {
    this.handle = options.handle;
    this.container = options.container;
  }

  setDraggable() {
    this.handle.onmousedown = this.handleMousedown.bind(this);
  }

  /** @param event {MouseEvent} */
  handleMousedown(event) {
    this.container.onmousemove = this.handleMousemove.bind(this);
    this.container.onmouseup = this.handleMouseup.bind(this);
    event.preventDefault();
  }

  handleMouseup() {
    this.container.onmouseup = null;
    this.container.onmousemove = null;
  }

  /** @param event {MouseEvent} */
  handleMousemove(event) {
    const { movementX, movementY } = event;

    const { x: left, y: top } = this.getTargetPosition();

    this.setTargetPosition(left + movementX, top + movementY);

    event.preventDefault();
  }

  setTargetPosition(x, y) {
    this.target.style.left = `${x}px`;
    this.target.style.top = `${y}px`;
  }

  getTargetPosition() {
    const { x, y } = this.target.getBoundingClientRect();
    return { x, y };
  }

  destroy() {
    this.handle.onmousedown = null;

    this.target = null;
    this.handle = null;
    this.container = null;
  }
}

export default DraggableElement;
```

## 参考

* [How TO - Create a Draggable HTML Element](https://www.w3schools.com/howto/howto_js_draggable.asp)