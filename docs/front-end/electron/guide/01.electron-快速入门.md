<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2025-08-02 17:10:48
@modify date 2025-08-16 12:15:33
@desc [description]
#endregion-->

# electron - 快速入门

## 1. 什么是 Electron？

Electron 是⼀个跨平台桌⾯应⽤开发框架，

开发者可以使⽤：HTML、CSS、JavaScript 等 Web 技术来构建桌⾯应⽤程序，

它的本质是结合了 Chromium 和 Node.js，现在⼴泛⽤于桌⾯应⽤程序开发

官网: https://www.electronjs.org/

## 2. Electron 的优势

1. 可跨平台：同⼀套代码可以构建出能在：Windows、macOS、Linux 上运⾏的应⽤程序。
2. 上⼿容易：使⽤ Web 技术就可以轻松完成开发桌⾯应⽤程序。
3. 底层权限：允许应⽤程序访问⽂件系统、操作系统等底层功能，从⽽实现复杂的系统交互。
4. 社区⽀持：拥有⼀个庞⼤且活跃的社区，开发者可以轻松找到⽂档、教程和开源库。

## 3. Electron 技术架构

### 3.1. 技术架构

![image-20250802170809861](./images/image-20250802170809861.png)

### 3.2. 进程模型

![image-20250802170856059](./images/image-20250802170856059.png)

## 4. 搭建⼀个⼯程

说明:

* entry point should be main.js (you will be creating that file soon).
* author, license, and description can be any value, but will be necessary for packaging later on.

依赖:

```shell
npm i -D electron
```

package.json:

```json
{
  "name": "electron-proj",
  "version": "1.0.0",
  "main": "main.js",
  "scripts": {
    "start": "electron ."
  },
  "author": "wuqinfei",
  "license": "ISC",
  "description": "this is electron app",
  "devDependencies": {
    "electron": "^37.3.0"
  }
}
```

main.js:

```js
const { app, BrowserWindow } = require("electron");

app.on('ready', () => {
  let browserWindow = new BrowserWindow({
    width: 800,
    height: 600,

    // 隐藏菜单栏
    // https://www.electronjs.org/docs/latest/api/browser-window#winautohidemenubar-linux-windows
    autoHideMenuBar: true,

    // x: 0, // 初始位置
    // y: 0, // 初始位置
    alwaysOnTop: true,  // 置顶
  });
})
```

运行:

```shell
npm start
```

## 5. 加载本地页面

目录:

```text
electron-proj/
  index.js
  pages/
    index.html
    index.css
```

index.js:

```js
browserWindow.loadFile('./pages/index.html')
```

index.html:

```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
  <title>Document</title>
</head>
<body>
  <h1>Hello</h1>
</body>
</html>
```

## 6. 完善窗口行为

```js
const { app, BrowserWindow } = require("electron");

function createWindow() {
  let browserWindow = new BrowserWindow({
    width: 800,
    height: 600,

    // 隐藏菜单栏
    // https://www.electronjs.org/docs/latest/api/browser-window#winautohidemenubar-linux-windows
    autoHideMenuBar: true,

    // x: 0, // 初始位置
    // y: 0, // 初始位置
    alwaysOnTop: true,  // 置顶
  });

  browserWindow.loadFile('./pages/index.html')
}

// 当app准备好后，执⾏createWindow创建窗⼝
app.on('ready',()=>{
  createWindow()


  // 2. mac 应⽤即使在没有打开任何窗⼝的情况下也继续运⾏，并且在没有窗⼝可⽤的情况下激活应⽤时会打开新的窗⼝。

  // 当应⽤被激活时
  app.on('activate', () => {
    //如果当前应⽤没有窗⼝，则创建⼀个新的窗⼝
    if (BrowserWindow.getAllWindows().length === 0) createWindow()
  })
})


// 1. Windows 和 Linux 平台窗⼝特点是：关闭所有窗⼝时退出应⽤。

// 当所有窗⼝都关闭时
app.on('window-all-closed', () => {
  // 如果所处平台不是mac(darwin)，则退出应⽤。
  if (process.platform !== 'darwin') app.quit()
})

```
