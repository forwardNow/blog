<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2024-05-24 12:09:33
@modify date 2024-11-07 14:59:10
@desc [description]
#endregion-->

# vue3 核心技术

## 1. 介绍

vue 开发者工具:

* 国内可以在 [极简插件](https://chrome.zzzmh.cn/) 搜索并下载谷歌插件

## 2. vite 创建 vue3 工程

>Vite 需要 Node.js 版本 18+ 或 20+。

示例：

```shell
npm create vite@latest
```

总结：

* Vite 项目中，`index.html` 是项目的入口文件
* Vite 解析 `<script type="module" src="src/main.ts">`

参考：

* [https://vitejs.cn](https://vitejs.cn/)

## 3. 核心语法

### 3.1. OptionsAPI 与 CompositionAPI

Vue2 的 API 设计是 Options（配置）风格的

* 按配置项来拆分（组织）代码

Vue3 的 API 设计是 Composition（组合）风格的

* 按业务功能来拆分（组织）代码

### 3.2. setup

#### 3.2.1. 概述

说明：

* `setup` 是 Vue3 中一个新的配置项，组合式 API 在 setup 中才会生效

特点：

* `setup` 函数返回的对象中的内容，可直接在模板中使用。
* `setup` 中的 `this` 指向 `undefined`。
* `setup` 函数会在 `beforeCreate` 之前调用，它是“领先”所有钩子执行的。

示例：

```vue
<template>
  <div>{{ name }}</div>
  <button @click="showName">showName</button>
</template>
<script>
export default {
  setup() {
    const name = '张三';

    const showName = () => {
      alert(name);
    };

    return {
      name,
      showName,
    };
  }
}
</script>
```

#### 3.2.2. setup() 的返回值

setup() 的返回值:

* 对象: 对象中属性、方法可以直接在模板中使用
* 函数: 可以自定义渲染内容

示例:

```js
export default {
  setup() {
    let name = '张三';
    
    return { name };
  }
}

export default {
  setup() {
    return () => '张三';
  }
}
```

#### 3.2.3. setup 与 Options API 的关系

说明：

* 在 Options API 中可以通过 `this` 读取到 `setup()` 返回的内容
* 因为 `setup()` 先执行, 如果与 Options API 中暴露的属性名称冲突，则以 Options API 为准

示例:

```vue
<template>
  <div>{{ message }}</div> <!-- hello -->
  <div>{{ msg }}</div>     <!-- hello -->
  <div>{{ name }}</div>    <!-- 李四 -->
</template>
<script lang="ts">
export default {
  setup() {
    return {
      name: '张三',
      message: 'hello',
    }
  },

  data() {
    return {
      name: '李四',
      msg: this.message,
    }
  }
}
</script>
```