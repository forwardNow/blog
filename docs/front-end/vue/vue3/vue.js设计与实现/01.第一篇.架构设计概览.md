# 第一篇.架构设计概览

## 1. 第 1 章 权衡的艺术

### 1.1. 命令式和声明式

视图层框架按范式分为：

* 命令式：关注过程，与自然语音一一对应
* 声明式：关注结果，由框架来实现过程

### 1.2. 性能和可维护性

框架封装了命令式代码，以实现面向用户的命令式

声明式代码的性能不优于命令式代码的性能

### 1.3. 虚拟 DOM 的性能到底如何

声明式代码的更新性能消耗 = 找出差异的性能消耗 + 直接修改的性能消耗

虚拟 DOM 就是为了最小化找出差异才出现的

新建页面：

|         | innerHTML(模板)     | 虚拟DOM               |
| ------- | :------------------ | --------------------- |
| JS运算  | 渲染 HTML 字符串    | 创建JS对象（虚拟DOM） |
| DOM运算 | 新建所有新 DOM 元素 | 新建所有新 DOM 元素   |

更新页面：

|         | innerHTML(模板)                          | 虚拟DOM                    |
| ------- | :--------------------------------------- | -------------------------- |
| JS运算  | 渲染 HTML 字符串                         | 创建新的虚拟DOM对象 + diff |
| DOM运算 | 销毁所有旧 DOM 元素，新建所有新 DOM 元素 | 必要的 DOM 更新            |