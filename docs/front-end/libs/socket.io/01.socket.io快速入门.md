<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2024-01-04 10:51:44
@modify date 2024-01-04 10:51:45
@desc [description]
#endregion-->


# socket.io 快速入门

## 1. 介绍

使用 socket.io 的服务端和客户端进行 websocket 通信

## 2. 服务端

安装：

```shell
npm i express socket.io

# "express": "^4.18.2",
# "socket.io": "^4.7.3"
```

示例：

```js
const express = require("express");
const { createServer } = require("http");
const { Server } = require("socket.io");

const app = express();
const httpServer = createServer(app);
const io = new Server(httpServer, { cors: {} });

io.on("connection", (socket) => {
  console.log('server: connected!')
});


app.get('/', (req, res) => {
  res.send('hello');
})

httpServer.listen(30001, () => {
  console.log('http://localhost:30001');
});
```

### 2.1. 客户端

安装：

```shell
npm i socket.io-client

# "socket.io-client": "^4.7.3"
```

示例:

```js
import { io } from "socket.io-client";

const socket = io(`ws:/localhost:30001`);
```

## 3. 参考

* [https://socket.io/docs/v4/server-initialization/](https://socket.io/docs/v4/server-initialization/)
* [Socket.IO —— 处理 CORS](https://socket.io/zh-CN/docs/v4/handling-cors/#configuration)