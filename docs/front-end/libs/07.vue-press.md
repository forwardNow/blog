# vue-press

>建议使用 node v16.13.1(及以下版本)

[[toc]]

## 1. 安装

```shell
# cli
npm install -D vuepress

# 插件
npm i -D @vuepress/plugin-nprogress vuepress-plugin-smooth-scroll
```

## 2. 目录

```text
${root}/
    docs/
        .vuepress/
            public/
                logo.png
            config.js
        frontend/
            01.nginx.md
        README.md
    package.json
```

## 3. 配置

`${root}/docs/.vuepress/config.js` ：

```javascript
module.exports = {
  title: '知识库',
  description: '知识库',
  head: [
    ['link', { rel: 'icon', href: '/logo.png' }]
  ],
  
  markdown: {
    lineNumbers: true,
  },
  themeConfig: {
    sidebar: [
      ['/', 'Introduction'], // [ path, menuText]
      {
        title: '分组1',
        collapsable: false,
        children: [
          ['/frontend/01.nginx.md', 'nginx 的配置']
        ]
      }
    ]
  },

  plugins: [
    [
      '@vuepress/last-updated',
      {
        transformer: (timestamp, lang) => {
          moment.locale(lang);
          const lastUpdateTime = moment(timestamp);
          const fromNow = lastUpdateTime.fromNow();
          const date = lastUpdateTime.format('YYYY-MM-DD HH:mm:ss')
          return `${date} (${fromNow})`;
        }
      }
    ],
    '@vuepress/plugin-nprogress',
    'vuepress-plugin-smooth-scroll',
  ]
}
```

`${root}/package.json` ：

```json
{
  "scripts": {
    "docs:dev": "vuepress dev docs",
    "docs:build": "vuepress build docs"
  }
}
```

## 4. 报错

### 4.1. 使用 node v17.2.0 导致报错

错误如下：

```text
node:internal/crypto/hash:67
  this[kHandle] = new _Hash(algorithm, xofLen);
                  ^

Error: error:0308010C:digital envelope routines::unsupported
    at new Hash (node:internal/crypto/hash:67:19)
    at Object.createHash (node:crypto:130:10)
    at module.exports (D:\dev\learn\blog\node_modules\webpack\lib\util\createHash.js:135:53)
    at NormalModule._initBuildHash (D:\dev\learn\blog\node_modules\webpack\lib\NormalModule.js:417:16)
    at handleParseError (D:\dev\learn\blog\node_modules\webpack\lib\NormalModule.js:471:10)
    at D:\dev\learn\blog\node_modules\webpack\lib\NormalModule.js:503:5
    at D:\dev\learn\blog\node_modules\webpack\lib\NormalModule.js:358:12
    at D:\dev\learn\blog\node_modules\loader-runner\lib\LoaderRunner.js:373:3
    at iterateNormalLoaders (D:\dev\learn\blog\node_modules\loader-runner\lib\LoaderRunner.js:214:10)
    at Array.<anonymous> (D:\dev\learn\blog\node_modules\loader-runner\lib\LoaderRunner.js:205:4)
    at Storage.finished (D:\dev\learn\blog\node_modules\enhanced-resolve\lib\CachedInputFileSystem.js:55:16)
    at D:\dev\learn\blog\node_modules\enhanced-resolve\lib\CachedInputFileSystem.js:91:9
    at D:\dev\learn\blog\node_modules\graceful-fs\graceful-fs.js:123:16
    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read_file_context:68:3) {
  opensslErrorStack: [ 'error:03000086:digital envelope routines::initialization error' ],
  library: 'digital envelope routines',
  reason: 'unsupported',
  code: 'ERR_OSSL_EVP_UNSUPPORTED'
}

Node.js v17.2.0
```

解决方法：

```shell
# 安装并使用 node v16
nvm install 16

  # Downloading node.js version 16.13.1 (64-bit)...
  # Extracting...
  # Complete

  # Installation complete. If you want to use this version, type

  # nvm use 16.13.1

nvm use 16.13.1

  # Now using node v16.13.1 (64-bit)
```

## 5. 开发主题

颜色变量：`node_modules/@vuepress/core/lib/client/style/config.styl`

## 6. v-pre

避免被解析

```text
::: v-pre

`Vue.filter(filterName, fn)`

::: 
```

## 7. 导入代码文件

```html
<<< @/docs/front-end/libs/echarts/codes/01-quick-start.html

-->

``html
xxx
``

```

必须使用绝对路径

## 8. 参考

* [官网](https://vuepress.vuejs.org/zh/)
* [IntelliJ Platform UI Guidelines](https://jetbrains.design/intellij/resources/icons_list/)
