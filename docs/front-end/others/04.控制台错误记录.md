# 控制台错误记录

## 1. `Error: spawn webpack ENOENT`

### 1.1. 错误日志

```text
/usr/local/bin/node /usr/local/lib/node_modules/npm/bin/npm-cli.js run dev --scripts-prepend-node-path=auto

> my-proj@1.0.0 dev
> cross-env ENV=dev webpack serve

node:events:368
      throw er; // Unhandled 'error' event
      ^

Error: spawn webpack ENOENT
    at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19)
    at onErrorNT (node:internal/child_process:475:16)
    at processTicksAndRejections (node:internal/process/task_queues:83:21)
Emitted 'error' event on ChildProcess instance at:
    at Process.ChildProcess._handle.onexit (node:internal/child_process:288:12)
    at onErrorNT (node:internal/child_process:475:16)
    at processTicksAndRejections (node:internal/process/task_queues:83:21) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'spawn webpack',
  path: 'webpack',
  spawnargs: [ 'serve' ]
}

Node.js v17.3.0

进程已结束,退出代码1
```

删除 `node_modules` 并重新安装 `node_modules` 仍旧报错。

### 1.2. 说明

* `spawn` 用于执行 shell 脚本
* `webpack` 是可执行文件，位于 `node_modules/.bin/`
* `ENOENT`  no such file or directory
* `Error: spawn webpack ENOENT` 的意思是找不到可执行文件 `webpack`

### 1.3. 原因

* 频繁更新 `package.json` 及 `npm i` 可能导致某些依赖“丢失”
* 清除缓存再安装 `node_modules` 可以解决问题

### 1.4. 解决

```shell
# 1. 删除 node_modules

# 2. 清除缓存
npm cache clean -f

# 3. 重新安装 node_modules
npm i
```

### 1.5. 参考

* [spawning-bat-and-cmd-files-on-windows —— nodejs.org](https://nodejs.org/api/child_process.html#spawning-bat-and-cmd-files-on-windows)
* [why-does-enoent-mean-no-such-file-or-directory —— stackoverflow](https://stackoverflow.com/questions/19902828/why-does-enoent-mean-no-such-file-or-directory)