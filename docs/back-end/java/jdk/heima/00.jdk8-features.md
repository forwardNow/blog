<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2025-08-04 23:38:14
@modify date 2025-08-15 20:21:52
@desc [description]
#endregion-->

# jdk8 新特性

## 1. 概述

Open JDK 与 Oracle JDK:

* 大多数 JDK 都是基于 Open JDK 开发的，比如 Oracle JDK
* Open JDK 官网: https://openjdk.org/
* 2019年发布的 Oracle Java SE 需要商业授权

## 2. Lambda

### 2.1. 体验

```java
new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println("匿名内部类...");
    }
}).start();

new Thread(() -> {
    System.out.println("Lambda表达式...");
}).start();
```

Lambda 表达式的好处: 简化匿名内部类的书写

### 2.2. 无参数无返回值的 Lambda

说明:

* 调用的方法中，有个参数是接口类型，可以考虑使用 Lambda 表达式

示例:

```java
public interface Swimmable {
    void swimming();
}


public class Lambda_02_use {
    public static void main(String[] args) {
        goSwimming(new Swimmable() {
            @Override
            public void swimming() {
                System.out.println("匿名内部类");
            }
        });

        goSwimming(() -> {
            System.out.println("Lambda");
        });
    }

    public static void goSwimming(Swimmable swimmable) {
        swimmable.swimming();
    }
}
```

### 2.3. 有参数有返回值的 Lambda

示例1:

```java
public interface Smokable {
    int smoking(String name);
}


public class Lambda_03_arg_ret {
    public static void main(String[] args) {
        goSmoking(new Smokable() {
            @Override
            public int smoking(String name) {
                System.out.println("匿名内部类 " + name);
                return 1;
            }
        });

        goSmoking((String name) -> {
            System.out.println("Lambda " + name);
            return 2;
        });
    }

    public static void goSmoking(Smokable s) {
        int num = s.smoking("中华");
        System.out.println("返回值: " + num);
    }
}
```

示例2, 对象列表排序:

```java
public class Person {
    public String name;
    public int age;
    // ...
}


public class Lambda_04_集合排序 {
    public static void main(String[] args) {
        List<Person> personList = new ArrayList<>();

        personList.add(new Person("张三", 20));
        personList.add(new Person("李四", 40));
        personList.add(new Person("王五", 30));

        // sortList1(personList);
        sortList2(personList);
        
        for (Person p : personList) {
            System.out.println(p);
        }
    }

    private static void sortList1(List<Person> personList) {
        personList.sort(new Comparator<Person>() {
            @Override
            public int compare(Person o1, Person o2) {
                return o1.age - o2.age;
            }
        });

    }

    private static void sortList2(List<Person> personList) {
        personList.sort((o1, o2) -> {
            return o1.age - o2.age;
        });
    }
}
```

### 2.4. Lambda 简写形式

规则:

1. 可省略(小括号内的)参数类型 
2. 如果只有一个形参，则小括号可以省略
2. 如果方法体只有一个语句，则可以省略 花括号、return、分号

示例:

```java
(int num) -> {
    return num + 1;
};

// 1
(num) -> {
    return num + 1;
};

// 2
num -> {
    return num + 1;
};

// 3
num -> num + 1;
```

### 2.5. 使用 Lambda 的前提条件

前提条件:

1. Lambda 表达式只能用于 接口类型形参、变量
2. 接口中有且仅有一个（抽象）方法

示例:

```java
public class Lambda_05_前提条件 {
    public static void main(String[] args) {
        goFlying(() -> System.out.println("Flying ..."));

        Flyable f = () -> System.out.println("Flying ...");
    }

    public static void goFlying(Flyable f) {
        f.flying();
    }
}

interface Flyable {
    void flying();
}
```