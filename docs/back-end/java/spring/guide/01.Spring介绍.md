<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2023-09-27 20:11:03
@modify date 2023-10-01 18:24:14
@desc [description]
#endregion-->


# Spring 介绍

## 1. 为什么要学

* 简化开发
* 框架整合

## 2. 初识 Spring

全家桶：

* Spring Framework - 底层框架
* Spring Boot 
* Spring Cloud
* ...

Spring 5:

* 全面支持 JDK8

## 3. 核心概念

概念：

* IOC / DI
* IoC 容器
* Bean

IoC：

* Inversion of Control, 控制反转，是思想
* 不主动 new 对象，由外部创建对象

IoC 容器：

* 充当 IoC 思想的 “外部”
* 容器里面创建、管理的对象，叫做 bean

DI：

* Dependency Injection, 依赖注入
* 在容器中建立 bean 与 bean 之间的依赖关系的过程，称为依赖注入

目标:充分解耦

* 使用 IoC 容器管理 bean (IoC)
* 在 IoC 容器内将有依赖关系的 bean 进行关系绑定 (DI)

最终效果

* 使用对象时不仅可以直接从 IoC 容器中夫取，并且获取到的 bean 已经绑定了所有的依赖关系

## 4. IoC 入门案例

目录：

```text
project/
  src/main/
    java/
      org.example/
        dao/
          BookDao.java
          impl/
            BookDaoImpl.java
        service/
          BookService.java
            impl/
              BookServiceImpl.java
        App.java
    resources/
      applicationContext.xml
```

文件:

* App.java:

    ```java
    package org.example;

    import org.example.service.BookService;
    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class App {
        public static void main( String[] args ) {
            ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
            BookService bookService = (BookService) ctx.getBean("bookService");
            bookService.save();
        }
    }
    ```

* applicationContext.xml:

    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="bookDao" class="org.example.dao.impl.BookDaoImpl"/>

        <bean id="bookService" class="org.example.service.impl.BookServiceImpl">
            <property name="bookDao" ref="bookDao"/>
        </bean>

    </beans>
    ```

* BookService.java

    ```java
    package org.example.service;

    public interface BookService {
        void save();
    }
    ```

* BookServiceImpl.java

    ```java
    package org.example.service.impl;

    import org.example.dao.BookDao;
    import org.example.service.BookService;

    public class BookServiceImpl implements BookService {
        private BookDao bookDao;
        
        public void save() {
            System.out.println("BookServiceImpl: save()!");
            bookDao.save();
        }

        public void setBookDao(BookDao bookDao) {
            this.bookDao = bookDao;
        }
    }
    ```

* BookDao.java

    ```java
    package org.example.dao;

    public interface BookDao {
        void save();
    }
    ```

* BookDaoImpl.java

    ```java
    package org.example.dao.impl;

    import org.example.dao.BookDao;

    public class BookDaoImpl implements BookDao {
        public void save() {
            System.out.println("BookDaoImpl save!");
        }
    }
    ```

## 5. bean 配置

别名：

* 属性: `name`
* 说明: 可定义多个，用 逗号、分号、空格 分隔
* 示例: `<bean name="service, bookServiceImpl" />`

作用范围:

* 属性: `scope`
* 说明: `singleton` (单例、默认), `prototype` (非单例)
* 示例: `<bean ... scope="prototype">`
