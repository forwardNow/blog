<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2026-02-04 17:03:58
@modify date 2026-02-14 10:37:09
@desc [description]
#endregion-->

# SpringCloud-黑马-教程

## 1. 微服务技术栈导学

微服务技术栈:

![image-20260213221822203](./images/image-20260213221822203.png)

实用篇:

1. 微服务治理
   * Eureka
   * Nacos
   * OpenFeign
   * 网关 Gateway
   * 配置中心 Nacos
   
2. Docker
   * Docker 原理
   * Docker 使用
   * Dockerfile
   * DockerCompose

3. 异步通信
   * 同步和异步
   * MQ技术选型
   * SpringAMQP
   * 消费者限流

4. 分布式搜索
   * DSL 语法
   * HighLevelClient
   * 拼音搜索
   * 自动补全
   * 竞价排名
   * 地理搜索
   * 聚合统计
   * 分片集群

高级篇:

1. 微服务保护
   * 流量控制
   * 系统保护
   * 熔断降级
   * 服务授权

2. 分布式事务
   * XA 模式
   * TCC 模式
   * AT 模式
   * Saga 模式

3. 分布式缓存
   * 数据持久化
   * Redis 主从集群
   * 哨兵机制
   * Redis 分片集群

4. 多级缓存
   * 多级缓存分层
   * Nginx 缓存
   * Redis 缓存
   * Canal 数据同步

5. 可靠消息服务
   * 消息三方确认
   * 惰性队列
   * 延迟队列
   * 镜像集群
   * 仲裁队列

面试篇:

1. Nacos 源码
   * Nacos 的服务发现原理
   * Nacos 服务注册原理
   * Nacos 心跳机制
   * Nacos、Eureka 差异

2. Sentinel 源码
   * Sentinel 滑动窗口算法
   * 令牌桶算法
   * 漏桶算法

3. Redis 热点问题
   * 分布式锁问题
   * 缓存穿透
   * 缓存击穿
   * 缓存雪崩

## 2. 认识微服务

### 2.1. 服务架构演变

#### 2.1.1. 单体架构

单体架构：将业务的所有功能集中在一个项目中开发，打成一个包部署。

![image-20260214094539190](./images/image-20260214094539190.png)

优点：

* 架构简单
* 部署成本低

缺点：

* 耦合度高

#### 2.1.2. 分布式架构

分布式架构：根据业务功能对系统进行拆分，每个业务模块作为独立项目开发，称为一个服务。

![image-20260214101008818](./images/image-20260214101008818.png)

优点：

* 降低服务耦合
* 有利于服务升级拓展

#### 2.1.3. 服务治理

![image-20260214101117827](./images/image-20260214101117827.png)

分布式架构的要考虑的问题：

* 服务拆分粒度如何？
* 服务集群地址如何维护？
* 服务之间如何实现远程调用？
* 服务健康状态如何感知？

#### 2.1.4. 微服务

![image-20260214101302417](./images/image-20260214101302417.png)

微服务是一种经过良好架构设计的分布式架构方案，微服务架构特征：

* 单一职责：微服务拆分粒度更小，每一个服务都对应唯一的业务能力，做到单一职责，避免重复业务开发
* 面向服务：微服务对外暴露业务接口
* 自治：团队独立、技术独立、数据独立、部署独立
* 隔离性强：服务调用做好隔离、容错、降级，避免出现级联问题

#### 2.1.5. 小结

单体架构特点？

* 简单方便，高度耦合，扩展性差。
* 适合小型项目，例如：学生管理系统

分布式架构特点？

* 松耦合，扩展性好，但架构复杂，难度大。
* 适合大型互联网项目，例如：京东、淘宝

微服务：一种良好的分布式架构方案

* 优点：拆分粒度更小、服务更独立、耦合度更低
* 缺点：架构非常复杂，运维、监控、部署难度提高


### 2.2. 微服务技术对比

#### 2.2.1. 微服务结构

微服务这种方案需要技术框架来落地，全球的互联网公司都在积极尝试自己的微服务落地技术。在国内最知名的就是 SpringCloud 和阿里巴巴的 Dubbo。

![image-20260214103136602](./images/image-20260214103136602.png)

#### 2.2.2. 微服务技术对比

|                | Dubbo               | SpringCloud              | SpringCloudAlibaba       |
| -------------- | ------------------- | ------------------------ | ------------------------ |
| 注册中心       | zookeeper、Redis    | Eureka、Consul           | Nacos、Eureka            |
| 服务远程调用   | Dubbo协议           | Feign（http协议）        | Dubbo、Feign             |
| 配置中心       | 无                  | SpringCloudConfig        | SpringCloudConfig、Nacos |
| 服务网关       | 无                  | SpringCloudGateway、Zuul | SpringCloudGateway、Zuul |
| 服务监控和保护 | dubbo-admin，功能弱 | Hystix                   | Sentinel                 |

#### 2.2.3. 企业需求

SpringCloud + Feign:

* 使用SpringCloud技术栈
* 服务接口采用Restful风格
* 服务调用采用Feign方式

SpringCloudAlibaba + Feign:

* 使用SpringCloudAlibaba技术栈
* 服务接口采用Restful风格
* 服务调用采用Feign方式

SpringCloudAlibaba + Dubbo:

* 使用SpringCloudAlibaba技术栈
* 服务接口采用Dubbo协议标准
* 服务调用采用Dubbo方式

Dubbo 原始模式:

* 基于Dubbo老旧技术体系
* 服务接口采用Dubbo协议标准
* 服务调用采用Dubbo方式

### 2.3. SpringCloud

## 3. 分布式服务架构案例

## 4. Eureka 注册中心

## 5. Ribbon 负载均衡原理

## 6. Nacos 注册中心