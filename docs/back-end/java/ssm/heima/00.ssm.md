<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2025-07-09 21:21:12
@modify date 2025-07-10 21:49:59
@desc [description]
#endregion-->

# SSM

## 1. spring

### 1.1. 核心概念

(1) 什么IOC/DI思想?

IOC : 控制反转，控制反转的是对象的创建权

DI : 依赖注入，绑定对象与对象之间的依赖关系


(2) 什么是 IOC 容器?

Spring 创建了一个容器用来存放所创建的对象，这个容器就叫 IOC 容器


(3) 什么是 Bean?

容器中所存放的一个个对象就叫 Bean 或 Bean对象

### 1.2. 入门案例

目录:

```text
${root}
  src/main
      java/
          org/example
              App.java
              BookDao.java
              BookDaoImpl.java
              BookService.java
              BookServiceImpl.java
      resources/
          applicationContext.xml
          
  pom.xml
```

pom.xml:

```xml
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>5.2.10.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

resources/applicationContext.xml:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="bookDao" class="org.example.BookDaoImpl"/>

    <bean id="bookService" class="org.example.BookServiceImpl">
        <property name="bookDao" ref="bookDao"/>
    </bean>

</beans>
```

class:

```java
public class App {
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");

        BookService bookService = (BookService) ctx.getBean("bookService");
        bookService.save();
    }
}

public interface BookDao {
    public void save();
}
public class BookDaoImpl implements BookDao {
    public void save() {
      System.out.println("book dao save ...");
    }
}

public interface BookService {
    public void save();
}
public class BookServiceImpl implements BookService {
    private BookDao bookDao;

    public void setBookDao(BookDao bookDao) {
        this.bookDao = bookDao;
    }

    public void save() {
        System.out.println("book service save ...");
        bookDao.save();
    }

}
```

### 1.3. IOC 相关

#### 1.3.1. bean 基础配置

```xml
<!-- 
  id: 必须唯一
  class: 指定实现类的全名，不可以写接口
  name: 指定别名，可定义多个，分隔符: 空格、分号、空格
  scope: "singleton" (单例，默认) | "prototype" (非单例)
 -->
<bean 
  id="bookDao"
  class="org.example.quickstart.BookDaoImpl"

  name="bookDao1, bookDao2"

  scope="singleton"
/>
```

#### 1.3.2. bean 实例化

(1) 方式一: （无参）构造函数 实例化 bean

类:

```java
// 实现类
public class BookDaoImpl implements BookDao {
    public void save() {
        System.out.println("book dao save ...");
    }
}
```

配置:

```xml
<bean id="bookDao" class="org.example.BookDaoImpl"/>
```

使用:

```java
BookDao bookDao = (BookDao) ctx.getBean("bookDao");
bookDao.save();
```


(2) 方式二: 静态工厂 实例化 bean

类:

```java
// 静态工厂类
public class OrderDaoFactory {
    public static OrderDao getOrderDao(){
        return new OrderDaoImpl();
    }
}

// 实现类
public class OrderDaoImpl implements OrderDao {
    public void save() {
        System.out.println("order dao save ...");
    }
}
```

配置:

```xml
<bean id="orderDao" class="org.example.OrderDaoFactory" factory-method="getOrderDao" />
```

使用:

```java
OrderDao orderDao = (OrderDao) ctx.getBean("orderDao");
orderDao.save();
```


(3) 方式三: 实例工厂 实例化 bean

类:

```java
// 实例工厂类
public class UserDaoFactory {
    public UserDao getUserDao(){
        return new UserDaoImpl();
    }
}

// 实现类
public class UserDaoImpl implements UserDao {
    public void save() {
        System.out.println("user dao save ...");
    }
}
```

配置:

```xml
<bean id="userFactory" class="org.example.UserDaoFactory"/>
<bean id="userDao" factory-method="getUserDao" factory-bean="userFactory"/>
```

使用:

```java
UserDao userDao = (UserDao) ctx.getBean("userDao");
userDao.save();
```


(4) 方式四: FactoryBean 实例化 bean

类:

```java
// 工厂类
public class UserDaoFactoryBean implements FactoryBean<UserDao> {
    @Override
    public UserDao getObject() throws Exception {
        return new UserDaoImpl(); // 返回 bean
    }

    @Override
    public Class<?> getObjectType() {
        return UserDao.class; // 指定 bean 的类型
    }
}
```

配置:

```xml
<bean id="userDao2" class="org.example.UserDaoFactoryBean" />
```

使用:

```java
UserDao userDao = (UserDao) ctx.getBean("userDao2");
userDao.save();
```