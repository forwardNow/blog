<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2025-09-30 08:30:57
@modify date 2025-10-24 11:52:58
@desc [description]
#endregion-->

# Java hutool 糊涂工具

## 1. 介绍

官网: https://doc.hutool.cn/pages/index/

一个Java基础工具类，对文件、流、加密解密、转码、正则、线程、XML等JDK方法进行封装，组成各种Util工具类，同时提供以下组件：

| 模块                 |     介绍                                                                          |
|--------------------|---------------------------------------------------------------------------------- |
| hutool-aop         |     JDK动态代理封装，提供非IOC下的切面支持                                              |
| hutool-bloomFilter |     布隆过滤，提供一些Hash算法的布隆过滤                                                |
| hutool-cache       |     简单缓存实现                                                                     |
| hutool-core        |     核心，包括Bean操作、日期、各种Util等                                               |
| hutool-cron        |     定时任务模块，提供类Crontab表达式的定时任务                                          |
| hutool-crypto      |     加密解密模块，提供对称、非对称和摘要算法封装                                          |
| hutool-db          |     JDBC封装后的数据操作，基于ActiveRecord思想                                         |
| hutool-dfa         |     基于DFA模型的多关键字查找                                                         |
| hutool-extra       |     扩展模块，对第三方封装（模板引擎、邮件、Servlet、二维码、Emoji、FTP、分词等）            |
| hutool-http        |     基于HttpUrlConnection的Http客户端封装                                            |
| hutool-log         |     自动识别日志实现的日志门面                                                         |
| hutool-script      |     脚本执行封装，例如Javascript                                                      |
| hutool-setting     |     功能更强大的Setting配置文件和Properties封装                                        |
| hutool-system      |     系统参数调用封装（JVM信息等）                                                      |
| hutool-json        |     JSON实现                                                                       |
| hutool-captcha     |     图片验证码实现                                                                   |
| hutool-poi         |     针对POI中Excel和Word的封装                                                       |
| hutool-socket      |     基于Java的NIO和AIO的Socket封装                                                   |
| hutool-jwt         |     JSON Web Token (JWT)封装实现                                                    |
| hutool-ai          |     AI大模型封装实现                                                    |

依赖:

```xml
<dependency>
    <groupId>cn.hutool</groupId>
    <artifactId>hutool-all</artifactId>
    <version>5.8.40</version>
</dependency>
```

## 2. RandomUtil

### 2.1. 生成 6 位数字验证码

```java
import cn.hutool.core.util.RandomUtil;

// 6 位数字验证码
String captcha = RandomUtil.randomNumbers(6);
```

### 2.2. 生成名称随机字符串

```java
import cn.hutool.core.util.RandomUtil;

// 首次注册，生成的用户昵称
String nickname = "user_" + RandomUtil.randomString(6);
```

## 3. UUID

### 3.1. 生成随机 token

```java
// true - 不带中划线的 UUID
String token = UUID.randomUUID().toString(true); 
```

## 4. BeanUtil

### 4.1. 拷贝 bean 中属性

```java
// 将 user 里的属性拷贝到 新建的UserDTO 并返回
UserDTO userDTO = BeanUtil.copyProperties(user, UserDTO.class);
```

### 4.2. bean 转 Map

```java
Map<String, Object> userMap = BeanUtil.beanToMap(userDTO);


// 自定义转换选项
CopyOptions copyOptions = CopyOptions.create()
            .setIgnoreNullValue(true)
            // 将 值 转为 字符串
            .setFieldValueEditor((fieldName, fieldValue) -> fieldValue.toString());

Map<String, Object> userMap = BeanUtil.beanToMap(userDTO, new HashMap<>(), copyOptions);
```

### 4.3. Map 转 bean

```java
// false - 不忽略错误
UserDTO userDTO = BeanUtil.fillBeanWithMap(userMap, new UserDTO(), false);
```

## 5. StrUtil

### 5.1. 判断字符串是否有值

```java
String token = '123';
boolean b = StrUtil.isEmpty(token);
```

### 5.2. 判断对象是否为空白字符串

```java
Object token = '123';
boolean b = StrUtil.isBlankIfStr(token);
```

### 5.3. 字符串模板

```java
// 使用StrUtil的format方法格式化字符串
String result = StrUtil.format("Hello, {}! Welcome to {}.", "World", "Hutool");
```

## 6. CollectionUtil

### 6.1. 集合是否为空

```java
CollectionUtil.isEmpty(userMap)
```

## 7. JSONUtil

### 7.1. json 转 bean

```java
Shop shop = JSONUtil.toBean(shopJsonStr, Shop.class);
```

### 7.2. bean 转 json

```java
String showJsonStr = JSONUtil.toJsonStr(shop);
```

## 8. DateUtil

### 8.1. 当前日期加 1 秒

```java
Date createDate = DateUtil.offset(new Date(), DateField.SECOND, 1).toJdkDate();
```

## 9. BooleanUtil

### 9.1. 检查 Boolean 值是否为 true

```java
BooleanUtil.isTrue(Boolean.TRUE)  = true
BooleanUtil.isTrue(Boolean.FALSE) = false
BooleanUtil.isTrue(null)          = false
```

## 10. FileUtil

### 10.1. 根据 文件名或路径 获取 MIME

```java
String fileName = "test.jpg";
String mimeType = FileUtil.getMimeType(fileName);
System.out.println(mimeType); // 输出：image/jpeg
```

### 10.2. 修复路径

```java
/*
如果原路径尾部有分隔符，则保留为标准分隔符（/），否则不保留
1. 统一用 /
2. 多个 / 转换为一个 /
3. 去除左边空格
4. .. 和 . 转换为绝对路径，当..多于已有路径时，直接返回根路径

"/foo//"        => "/foo/"
"/foo/./"       => "/foo/"
"/foo/../bar"   => "/bar"
"/foo/../bar/"  => "/bar/"
"/foo/../bar/../baz" => "/baz"
*/ 
FileUtil.normalize(String path)
```

### 10.3. 遍历目录下所有文件

```java
/*
递归遍历目录以及子目录中的所有文件
如果用户传入相对路径，则是相对classpath的路径
如："test/aaa"表示"${classpath}/test/aaa"
*/
List<File> fileList = FileUtil.loopFiles("D:/dev");
```

### 10.4. 参考

* [Hutool Java工具类库-FileUtil(文件工具类)](https://blog.csdn.net/lengxia0/article/details/149080668)

## 11. CharsetDetector

### 11.1. 弹出文件的字符集

```java
InputStream minIoObject = minioUtils.readMinioObjectFileStream(minIoObjectName);
Charset fileCharset = CharsetDetector.detect(minIoObject);

// 如果 in 不是“合法”的 InputStream，可以使用 ByteArrayInputStream
byte[] body = IOUtils.toByteArray(minIoObject);
fileCharset = CharsetDetector.detect(new ByteArrayInputStream(body));

// fileCharset.toString()
```

## 12. ListUtil

### 12.1. 截取 List

```java
// 包头，不包尾；返回副本
ListUtil.sub(list, 1, 3);
```