<!--#region
@author 吴钦飞
@email wuqinfei@qq.com
@create date 2026-01-07 21:07:27
@modify date 2026-01-09 09:19:38
@desc [description]
#endregion-->

# FreeMarker - 教程

## 1. 概述

FreeMarker:

* 一款模板引擎，一个 Java 类库
* 一种基于 模板和要改变的数据，并用来生成文本的通用工具。

技术选型对比:

| 技术 | 说明 |
| - | - |
| Jsp | Jsp 为 Servlet 专用，不能单独进行使用 |
| Velocity | Velocity 从 2010 年更新完 2.0 版本后，7 年没有更新。Spring Boot 官方在 1.4 版本后对此也不再支持 |
| thmeleaf | 新技术，功能较为强大，但是执行的效率比较低 |
| freemarker | 性能好，强大的模板语言、轻量 |

## 2. 快速开始

### 2.1. 环境搭建

依赖: (springboot 项目)

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-freemarker</artifactId>
</dependency>
<!-- 操作文件 -->
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-io</artifactId>
    <version>1.3.2</version>
</dependency>
```

配置:

```yml
server:
  port: 80
spring:
  application:
    # 应用名称
    name: test-freemarker
  freemarker:
    # 关闭模板缓存，方便调试
    cache: false
    # 模板文件的后缀名 (默认 .ftlh)
    suffix: .ftl
    settings:
      # 模板更新的延迟时间，为 0 则没有延迟
      template_update_delay: 0
```

注意:

* freemarker 模板文件的扩展名通常是 `ftl`，也可以是 `html`、`xml`、`jsp` 等
* 模板文件默认存放在 `resources/templates`

### 2.2. 入门案例

controller:

```java
@Controller
public class FreeMarkerController {
    @GetMapping("/01-basic")
    public String basic(Model model) {
        model.addAttribute("name", "张三");
        model.addAttribute("stu", Student.of("李四", 18, new Date(), 123.3f));
        return "01-basic";
    }
}
```

bean:

```java
@Data
@AllArgsConstructor(staticName = "of")
public class Student {
    private String name;
    private int age;
    private Date birthday;
    private Float money;
}
```

templates/01-basic.ftl:

```html
<#-- 插值表达式 -->

<p>普通文本 String 展示:</p>
<ul>
  <li>name: ${ name }</li>
</ul>

<hr>

<p>Student 对象的属性展示: </p>
<ul>
  <li>stu.name : ${stu.name}</li>
  <li>stu.age : ${stu.age}</li>
</ul>
```

## 3. 指令语法

基础语法种类

集合指令（List 和 Map）

if 指令

运算符

空值处理

内建函数

### 3.1. 基础语法种类

注释:

```text
<#-- 注释内容， 会被湖绿 -->
```

插值(表达式):

```text
hello ${ name }
```

FTL 指令:

```text
<#指令名称></#指令名称>
```

文本:

```text
<#-- 模板中的普通文本，会直接输出 -->
文本内容
```

### 3.2. 集合指令

#### 3.2.1. List

格式:

```text
<#list 列表名 as 条目名>
  列表索引: ${ 条目名_index }
  元素的值: ${ 条目名 }
</#list>
```

示例:

```java
@GetMapping("/02-list")
public String list(Model model) {
    List<Student> studentList = new ArrayList<>();
    studentList.add(Student.of("张三", 18, new Date(2000, 1, 2), 123.3f));
    studentList.add(Student.of("李四", 23, new Date(2002, 10, 28), 456.7f));

    model.addAttribute("studentList", studentList);

    return "02-list";
}
```

```html
<table>
  <tr>
    <th>序号</th>
    <th>姓名</th>
    <th>年龄</th>
    <th>存款</th>
  </tr>
  <#list studentList as item>
    <tr>
      <th>${ item_index + 1 }</th>
      <th>${ item.name }</th>
      <th>${ item.age }</th>
      <th>${ item.money }</th>
    </tr>
  </#list>
</table>
```

## 4. 参考

* [项目实战微服务项目《黑马头条》 - FreeMarker](https://www.bilibili.com/video/BV1Qs4y1v7x4?vd_source=980e7e42545c81c2b6f1445ce8f16d28&spm_id_from=333.788.videopod.episodes&p=26)
* [【FreeMarker】一文快速入门 FreeMarker](https://blog.csdn.net/weixin_45683778/article/details/143183244)