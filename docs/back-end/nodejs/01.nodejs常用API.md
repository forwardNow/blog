# nodejs 常用 API

## 1. path

### 1.1. 获取路径的最后一节

```javascript
path.basename('/foo/bar/baz/asdf/quux.html');
// Returns: 'quux.html'

path.basename('/foo/bar/baz/asdf/quux.html', '.html');
// Returns: 'quux'
```

### 1.2. 路径分隔符

```javascript
path.sep
```

## 2. fs

### 2.1. 重命名

`fs.renameSync(oldPath, newPath)`

* `oldPath`: String | Buffer | URL
* `newPath`: String | Buffer | URL

Renames the file from oldPath to newPath. Returns undefined.

### 2.2. 删除文件或目录

`fs.rmSync(path[, options])`

* `path`: String | Buffer | URL
* `options`: Object
    * `recursive`: boolean. If true, perform a recursive directory removal. In recursive mode, operations are retried on failure. Default: false. Deprecated.

Synchronously removes files and directories. Returns undefined.

### 2.3. 拷贝文件

`fs.copyFileSync(src, dest[, mode])`

* `src`: string.
* `dest`: string.

Synchronously copies src to dest. By default, dest is overwritten if it already exists. Returns undefined. 

### 2.4. 读取目录下的文件（夹）

`fs.readdirSync(path[, options])`

Reads the contents of the directory.

```javascript
fs.readdirSync(dirPath);
/*
[
    'dir1',
    'dir2',
    '1.txt',
    '2.txt'
]
*/
```

### 2.5. 判断是否目录

```javascript
fs.lstatSync(path_string).isDirectory() 

// Objects returned from fs.stat() and fs.lstat() are of this type.

stats.isFile()
stats.isDirectory()
stats.isBlockDevice()
stats.isCharacterDevice()
stats.isSymbolicLink() // (only valid with fs.lstat())
stats.isFIFO()
stats.isSocket()
```

## 3. os

### 3.1. 获取IPv4

```javascript
const os = require('os');

const v4Ips = [];
const networkInterfaces = os.networkInterfaces();

Reflect.ownKeys(networkInterfaces).forEach((netName) => {
  const networkInterfaceInfoList = networkInterfaces[netName];

  networkInterfaceInfoList.forEach((networkInterfaceInfo) => {
    const { family, internal, address } = networkInterfaceInfo;

    if (family === 'IPv4' && !internal) {
      v4Ips.push(address);
    }
  });
});
```

### 3.2. 获取 Home 目录

```javascript
os.homedir();// C:\Users\wuqinfei
```

