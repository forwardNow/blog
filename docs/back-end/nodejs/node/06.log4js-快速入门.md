# log4js-快速入门

## 介绍

node 日志库

## 快速开始

安装：

```shell
npm i log4js

## "log4js": "^6.9.1"
```

示例：

```javascript
const log4js = require('log4js');
const logger = log4js.getLogger();

logger.level = log4js.levels.DEBUG; // 日志级别，输出 debug 级别及以上 的日志

logger.debug('hello, log4js');
logger.info('hello, log4js');
logger.warn('hello, log4js');
logger.error('hello, log4js');
```

输出：

![](./images/log4js/01-first.png)

## 核心

* appenders   : 输出
* categories  : 类型
* level       : 级别
* layouts     : 格式

### appenders (输出)

分类：

| type           | desc            |
|----------------|-----------------|
| stdout         | 标准输出流，输出到控制台，默认 |
| file           | 文件，按文件大小滚动创建文件  |
| dateFile       | 文件，按日期滚动创建文件    |
| categoryFilter | -               |
| console        | -               |
| fileSync       | -               |
| logLevelFilter | -               |
| multiFile      | -               |
| multiprocess   | -               |
| noLogFilter    | -               |
| recording      | -               |
| stderr         | -               |
| tcp            | -               |
| tcp-server     | -               |

参考：[https://log4js-node.github.io/log4js-node/appenders.html](https://log4js-node.github.io/log4js-node/appenders.html)

#### stdout

说明：

* This appender writes all log events to the standard output stream. It is the default appender for log4js.

配置：

```text
type    - stdout

layout  - object (optional, defaults to colouredLayout) 
        - see layouts
```

示例：

```javascript
log4js.configure({
  appenders: {
    stdout: {
      type: 'stdout'
    },
  },
  categories: {
    default: {
      appenders: ['stdout'],
      level: 'debug'
    },
  },
});
```

参考：[https://log4js-node.github.io/log4js-node/stdout.html](https://log4js-node.github.io/log4js-node/stdout.html)

#### file

说明：

* The file appender writes log events to a file. 
* It supports an optional maximum file size, and will keep a configurable number of backups.

配置：

```text
type        - "file"

filename    - string - the path of the file where you want your logs written.

maxLogSize  - integer (optional, defaults to undefined) 
            - the maximum size (in bytes) for the log file. 
              If not specified or 0, then no log rolling will happen. 
              maxLogSize can also accept string with the size suffixes: K, M, G such as 1K, 1M, 1G.
            
backups     - integer (optional, defaults to 5) 
            - the number of old log files to keep during log rolling (excluding the hot file).
            
layout      - (optional, defaults to basic layout) 
            - see layouts
```

示例：

```javascript
log4js.configure({
  appenders: {
    stdout: {
      type: 'stdout'
    },
  },
  categories: {
    default: {
      appenders: ['stdout'],
      level: 'debug'
    },
  },
});
```

参考：[https://log4js-node.github.io/log4js-node/stdout.html](https://log4js-node.github.io/log4js-node/stdout.html)

### categories (类型)

## 参考

* [Node.js 之 log4js 完全讲解](https://zhuanlan.zhihu.com/p/22110802)
