# npm 常用命令

## 1. npm install

作用：

* 安装依赖

问题：

* 通过 `npm install` 安装依赖会导致 `package-lock.json` 发生变化

* 不同人不同时间点使用 `npm install` 安装相同的包 也会产生不同的 `package-lock.json`

* 而 `package-lock.json` 又属于公共文件，多人同时更改会导致代码冲突

应用：

* 安装未在 `package.json` 声明的依赖

## 2. npm ci

作用：

* 基于 `package-lock.json` 安装依赖

应用：

* 安装已在 `package.json` 声明的依赖
* 也就是说，别人安装了新依赖，你拉取了 `package.json` 和 `package-lock.json` 后，使用 `npm ci` 安装依赖

参考：

* [npm-ci —— NPM Docs](https://docs.npmjs.com/cli/v8/commands/npm-ci)

## 3. npm link

作用：

* 将当前 npm 项目安装到本地全局环境

示例：

```shell
pwd
#=> cli


# 查看全局安装的位置
npm root -g

#=>C:\Program Files\nodejs\node_modules


# （本机）全局安装
npm link

# 执行命令
hui

#=> hehe


# 删除全局安装的依赖
npm uni -g @hui/cli
```

## 4. package.json 中的 bin 属性

作用：

* 创建（命令行）命令

示例：（package.json）

* 定义 hui 命令

  ```json
  {
    "bin": {
      "hui": "./src/index.js"
    }
  }
  ```

* `./src/index.js`

  ```javascript
  #!/usr/bin/env node

  console.log('hehe');
  ```

* 执行

  ```shell
  # 本地安装
  ./node_modules/.bin/hui

  # 全局安装
  hui
  ```

## 5. npm view 查看包的所有版本

```shell
npm view less-loader versions 
# [
#   '0.1.0',  '0.1.1',  '0.1.2',  '0.1.3',  '0.2.0',
#   '0.2.1',  '0.2.2',  '0.5.0',  '0.5.1',  '0.6.0',
#   '0.6.1',  '0.6.2',  '0.7.0',  '0.7.1',  '0.7.2',
#   '0.7.3',  '0.7.4',  '0.7.5',  '0.7.6',  '0.7.7',
#   '0.7.8',  '2.0.0',  '2.1.0',  '2.2.0',  '2.2.1',
#   '2.2.2',  '2.2.3',  '3.0.0',  '4.0.0',  '4.0.1',
#   '4.0.2',  '4.0.3',  '4.0.4',  '4.0.5',  '4.0.6',
#   '4.1.0',  '5.0.0',  '6.0.0',  '6.1.0',  '6.1.1',
#   '6.1.2',  '6.1.3',  '6.2.0',  '7.0.0',  '7.0.1',
#   '7.0.2',  '7.1.0',  '7.2.0',  '7.2.1',  '7.3.0',
#   '8.0.0',  '8.1.0',  '8.1.1',  '9.0.0',  '9.1.0',
#   '10.0.0', '10.0.1', '10.1.0', '10.2.0', '11.0.0',
#   '11.1.0'
# ]
```