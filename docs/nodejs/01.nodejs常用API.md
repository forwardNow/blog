# nodejs 常用 API

## 1. path

### 1.1. 获取路径的最后一节

```javascript
path.basename('/foo/bar/baz/asdf/quux.html');
// Returns: 'quux.html'

path.basename('/foo/bar/baz/asdf/quux.html', '.html');
// Returns: 'quux'
```

## 2. fs

### 2.1. 重命名

`fs.renameSync(oldPath, newPath)`

* `oldPath`: String | Buffer | URL
* `newPath`: String | Buffer | URL

Renames the file from oldPath to newPath. Returns undefined.

### 2.2. 删除文件或目录

`fs.rmSync(path[, options])`

* `path`: String | Buffer | URL
* `options`: Object
    * `recursive`: boolean. If true, perform a recursive directory removal. In recursive mode, operations are retried on failure. Default: false. Deprecated.

Synchronously removes files and directories. Returns undefined.

### 2.3. 拷贝文件

`fs.copyFileSync(src, dest[, mode])`

* `src`: string.
* `dest`: string.

Synchronously copies src to dest. By default, dest is overwritten if it already exists. Returns undefined. 

### 2.4. 读取目录下的文件（夹）

`fs.readdirSync(path[, options])`

Reads the contents of the directory.

```javascript
fs.readdirSync(dirPath);
/*
[
    'dir1',
    'dir2',
    '1.txt',
    '2.txt'
]
*/
```

## 3. os

### 3.1. 获取IPv4

```javascript
/**
 * @param patterns {string[]} 过滤符合该模式的 ip
 * @returns {string[]}
 */
function getIps(patterns = ['10.88.0.', '192.168.1.']) {
  const ips = [];
  const nets = networkInterfaces();

  // eslint-disable-next-line no-restricted-syntax
  for (const name of Object.keys(nets)) {
    // eslint-disable-next-line no-restricted-syntax
    for (const net of nets[name]) {
      // Skip over non-IPv4 and internal (i.e. 127.0.0.1) addresses
      if (net.family === 'IPv4' && !net.internal) {
        ips.push(net.address);
      }
    }
  }

  return ips.filter((ip) => patterns.some((pattern) => ip.startsWith(pattern)));
}
```

