<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script src="../../docs/.vuepress/public/echarts/echarts.min.js"></script>

<div id="box_32-map-scatter" style="width: 700px; height: 600px; border: solid 1px #ddd;"></div>
<script type="module">
  const chinaMap = await fetch('../../docs/.vuepress/public/echarts/china.json')
    .then((res) => res.json());
  echarts.registerMap('chinaMap', chinaMap);
  console.log(chinaMap)
  // airQualityList.${item}.name == chinaMap.features.${item}.properties.name
  const airQualityList = [
    { name: '北京', value: 39.92 }, { name: '天津', value: 39.13 }, { name: '上海', value: 31.22 },
    { name: '重庆', value: 66 }, { name: '河北', value: 147 }, { name: '河南', value: 113 },
    { name: '云南', value: 25.04 }, { name: '辽宁', value: 50 }, { name: '黑龙江', value: 114 },
    { name: '湖南', value: 175 }, { name: '安徽', value: 117 }, { name: '山东', value: 92 },
    { name: '新疆', value: 84 }, { name: '江苏', value: 67 }, { name: '浙江', value: 84 },
    { name: '江西', value: 96 }, { name: '湖北', value: 273 }, { name: '广西', value: 59 },
    { name: '甘肃', value: 99 }, { name: '山西', value: 39 }, { name: '内蒙古', value: 58 },
    { name: '陕西', value: 61 }, { name: '吉林', value: 51 }, { name: '福建', value: 29 },
    { name: '贵州', value: 71 }, { name: '广东', value: 38 }, { name: '青海', value: 57 },
    { name: '西藏', value: 24 }, { name: '四川', value: 58 }, { name: '宁夏', value: 52 },
    { name: '海南', value: 54 }, { name: '台湾', value: 88 }, { name: '香港', value: 66 },
    { name: '澳门', value: 77 }, { name: '南海诸岛', value: 55 }
  ];
  echarts.init(document.querySelector('#box_32-map-scatter')).setOption({
    dataset: {
      dimensions: ['name', 'longitude', 'latitude'],
      source: [
        { name: '湖北', longitude: 111.298572, latitude: 30.584355 }
      ]
    },
    geo: {
      map: 'chinaMap',
      roam: true,
      label: { show: true },
      zoom: 1.0,
    },
    series: [
      {
        type: 'map',
        geoIndex: 0, // 与第 0 个 geo 关联起来
        data: airQualityList,
      },
      {
        type: 'effectScatter',
        coordinateSystem: 'geo', // 使用地理坐标系
        rippleEffect: {
          scale: 10,
        },
        encode: { lng: 'longitude', lat: 'latitude'},
        // data: [
        //   { value: [114.298572, 30.584355] }
        // ]
      }
    ],
    visualMap: {
      min: 0,
      max: 300,
      calculable: true, // 滑块，筛选数据
    }
  });
</script>
